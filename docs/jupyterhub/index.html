<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.78.2" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>JupyterHub on CLIP | CLIP</title><meta property="og:title" content="JupyterHub on CLIP" />
<meta property="og:description" content="This page contains information about the JupyterHub service on CLIP
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://clip-hpc.github.io/docs/jupyterhub/" />
<meta property="article:modified_time" content="2021-02-23T18:33:03+01:00" />
<meta itemprop="name" content="JupyterHub on CLIP">
<meta itemprop="description" content="This page contains information about the JupyterHub service on CLIP
">
<meta itemprop="dateModified" content="2021-02-23T18:33:03+01:00" />
<meta itemprop="wordCount" content="1023">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JupyterHub on CLIP"/>
<meta name="twitter:description" content="This page contains information about the JupyterHub service on CLIP
"/>





<link rel="preload" href="/scss/main.min.6122f2e2f9c3d3a5f9018b8ae734705e9142428f7b0b48575a30b03ceecfeca0.css" as="style">
<link href="/scss/main.min.6122f2e2f9c3d3a5f9018b8ae734705e9142428f7b0b48575a30b03ceecfeca0.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">CLIP</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/platform/" ><span>Platform</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/services/" ><span>Services</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/clip/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CLIP</a>
  </li>
  <ul>
    <li class="collapse " id="docsclip">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/cbe/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CBE</a>
  </li>
  <ul>
    <li class="collapse " id="docscbe">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docscbesoftware" href="/docs/cbe/software/">Software</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docscbestorage" href="/docs/cbe/storage/">Storage</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docscbeslurm" href="/docs/cbe/slurm/">Slurm</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docscbeinteractive" href="/docs/cbe/interactive/">Interactive</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsknowncaveats" href="/docs/knowncaveats/">Known Caveats</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsxpra" href="/docs/xpra/">XPRA</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsrstudio" href="/docs/rstudio/">Rstudio</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docsjupyterhub" href="/docs/jupyterhub/">JupyterHub</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsbulktransfer" href="/docs/bulktransfer/">Bulk-Transfer</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docschangelog" href="/docs/changelog/">Change Notes</a>
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/clip-hpc/website//edit/master/content/en/docs/JupyterHub/index.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/clip-hpc/website//issues/new?title=JupyterHub%20on%20CLIP" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/clip-hpc/website//issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#basic-guide">Basic Guide</a></li>
    <li><a href="#multiple-jupyterlab-sessions">Multiple JupyterLab sessions</a></li>
    <li><a href="#custom-jupyter-kernels">Custom Jupyter Kernels</a>
      <ul>
        <li><a href="#example-python-virtualenv-as-kernel">Example Python virtualenv as Kernel</a></li>
      </ul>
    </li>
    <li><a href="#troubleshooting">Troubleshooting</a>
      <ul>
        <li><a href="#i-cannot-access-files-and-notebooks-that-are-on-my-group-share">I cannot access files and notebooks that are on my group share</a></li>
        <li><a href="#my-jupyterlab-session-does-not-start">My JupyterLab session does not start</a></li>
        <li><a href="#i-created-a-new-conda-environment-but-i-cant-create-a-new-notebook-using-that-environment">I created a new conda environment but I can&rsquo;t create a new notebook using that environment</a></li>
        <li><a href="#my-python-notebook-does-not-start-when-i-use-the-cbe-env-module-based-environment">My Python notebook does not start when I use the CBE env module based environment</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="https://clip-hpc.github.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://clip-hpc.github.io/docs/jupyterhub/">JupyterHub</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>JupyterHub on CLIP</h1>
    <div class="lead">This page contains information about the JupyterHub service on CLIP</div>
	       
	<h2 id="basic-guide">Basic Guide</h2>
<p>For interactive data analysis we support JupyterHub on CBE.<br>
Our JupyterHub service allows you to spawn one or more JupyterLab sessions that are executed on the CBE compute nodes.   Inside this JupyterLab session the user can start Jupyter notebooks that either run an R or Python kernel and execute the code that is stored inside the notebooks. For more information about the Jupyter project refer to the <a href="https://jupyter.org/">official project website</a>.
To access the JupyterHub service just open <a href="https://jupyterhub.vbc.ac.at">https://jupyterhub.vbc.ac.at</a> in your browser and click on the &ldquo;<em><strong>Sign in with Azure AD</strong></em>&rdquo; button. Once authenticated the user will see the the screen to open the default JupyterLab session (see <em><strong>Figure 1</strong></em>)
The user can choose from one of 3 job presets and also customize the individual job geometry by clicking on the &ldquo;Customize&rdquo; checkbox and changing the values for &ldquo;<em><strong>Memory</strong></em>&rdquo;, &ldquo;<em><strong>Cores</strong></em>&rdquo;, &ldquo;<em><strong>Runtime</strong></em>&rdquo;, &ldquo;<em><strong>Partition</strong></em>&rdquo; or &ldquo;<em><strong>GPUs</strong></em>&rdquo; (optional).</p>
<p>Additionally the user can select from 2 Jupyter environments:</p>
<ul>
<li>Environment based on Conda (Python, R)</li>
<li>Environment based on CBE env modules (Python 3.6.6)</li>
</ul>
<p>The following table should help choose the right option:</p>
<table>
<thead>
<tr>
<th>Features</th>
<th>Conda enviornment</th>
<th>CBE env module environment</th>
</tr>
</thead>
<tbody>
<tr>
<td>Kernels</td>
<td>R &amp; Python</td>
<td>Python 3.6.6</td>
</tr>
<tr>
<td>Custom conda environment</td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td>Support to load additional CBE modules</td>
<td>NO</td>
<td>YES</td>
</tr>
<tr>
<td>Performance</td>
<td>depends on pkgs installed in the conda environment</td>
<td>optimized because they are compiled by HPC Team</td>
</tr>
</tbody>
</table>







<div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 850px">
	<img class="card-img-top" src="/docs/jupyterhub/session_new_huaf787012deecdf4048a0adc826b72aff_150136_840x0_resize_catmullrom_2.png" width="840" height="772">
	
	<div class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Figure 1 - Creating a new JupyterLab session
</p>
	</div>
	
</div>
<p>Depending on which Jupyter environment is selected one of the following JupyterLab sessions will be presented to the user once the session is started.</p>
<table>
<tr>
<td>







<div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 450px">
	<img class="card-img-top" src="/docs/jupyterhub/session_conda_hu9cd03dedbd78ab64eeb753c470217c50_372428_440x0_resize_catmullrom_2.png" width="440" height="321">
	
	<div class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Figure 2 - Conda based environment
</p>
	</div>
	
</div>  
</td>
<td>







<div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 450px">
	<img class="card-img-top" src="/docs/jupyterhub/session_modules_hub264fb07b975fd366bed83d49792d2e9_385208_440x0_resize_catmullrom_2.png" width="440" height="344">
	
	<div class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Figure 3 - CBE env module based environment
</p>
	</div>
	
</div>
</td>
</tr>
</table>
On the left side, a navigation panel is displayed with different widgets:
<ul>
<li><strong>File browser</strong>: Open notebooks &amp; create, delete files.</li>
<li><strong>HDF5 viewer</strong>: View HDF5 datasets in the main panel</li>
<li><strong>Session viewer</strong>: See and manage (stop) running consoles and kernels</li>
<li><strong>Git viewer</strong>: See git repository information</li>
<li><strong>Commands</strong>: Quickly search and run comands that are also available through the top menu</li>
<li><strong>Data explorer</strong>: Explore datasets (csv, etc)</li>
<li><strong>Tab viewer</strong>: See open tabs and close them</li>
<li><strong>Software</strong> (only in CBE env module environment): Load and unload Environment Modules</li>
</ul>
<p>On the main panel you can start either a new Python, R notebook or console or open a terminal.</p>
<p>If you started the Conda based Jupyter environment you will see in addition to the default Python3 notebook, also any additional conda environments that contain the ipykernel or irkernel package. Additionally you can access the conda package manager widget by choosing from the top navigation: &ldquo;Settings -&gt; Conda Packages Manager&rdquo;:</p>







<div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 850px">
	<img class="card-img-top" src="/docs/jupyterhub/conda_pkg_manager_hud9c398296539012d062e0b1161a6dabe_383062_840x0_resize_catmullrom_2.png" width="840" height="435">
	
	<div class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Figure 4 - Conda Packages Manager
</p>
	</div>
	
</div>
<p>The &ldquo;Conda Pacakges Manager&rdquo; shows you the discovered conda environments and allows you to create new conda environments either from scratch or by cloning an existing one and installing/updating packages in any conda environment. Fore more information see the <a href="https://github.com/fcollonval/jupyter_conda#jupyterlab">official documentation</a>.</p>
<h2 id="multiple-jupyterlab-sessions">Multiple JupyterLab sessions</h2>
<p>Sometimes you might want to run multiple different JupyterLab sessions - with different resource requirements or different Jupyter environments (Conda or CBE modules based) in parallel.
You can do this by opening the JupterHub view by either going through &ldquo;<strong>File -&gt; Hub Control Panel</strong>&rdquo; in the already opened JupyterLab session or by navigating to <a href="https://jupyterhub.vbc.ac.at/hub/home">https://jupyterhub.vbc.ac.at/hub/home</a> in a new browser tab.</p>







<div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 850px">
	<img class="card-img-top" src="/docs/jupyterhub/session_list_hu7812db3b2e491a243e2c4a4c2baf2117_141570_840x0_resize_catmullrom_2.png" width="840" height="241">
	
	<div class="card-body px-0 pt-2 pb-0">
		<p class="card-text">
Figure 5 - Starting multiple JupyterLab sessions
</p>
	</div>
	
</div>
<p>Here you can see the list of existing JupyterLab sessions. You can stop or start and delete them. The default JupyterLab session can be controlled and accessed by the big &ldquo;<em><strong>Stop My Server</strong></em>&rdquo; and &ldquo;<em><strong>My Server</strong></em>&rdquo; buttons.<br>
To start a new JupyterLab session just choose a name and click on the &ldquo;Add New Server&rdquo; link.
This will show you the familiar session start screen from <em><strong>Figure 1</strong></em>.</p>
<h2 id="custom-jupyter-kernels">Custom Jupyter Kernels</h2>
<p>A &ldquo;<em><strong>kernel</strong></em>&rdquo; in the Jupyter universe is an interpreter for a Notebook. Kernels are available for various languages (Python, R, &hellip;). While Conda environments will be picked up automatically as custom kernels, you can also manually add Kernels to JupyterLab.</p>
<p>In essence, the kernel spec is a json config file that tells JupyterLab which interpreter to use for the Notebook.</p>
<h3 id="example-python-virtualenv-as-kernel">Example Python virtualenv as Kernel</h3>
<ul>
<li>create your virtual environment (i.e. <code>python3 -m venv my_experiment_venv</code> )</li>
<li>enable environment: <code>source my_experiment_venv/bin/activate</code></li>
<li>The virtual environment needs to have the python module &ldquo;<em><strong>ipykernel</strong></em>&rdquo; installed (<code>pip install ipykernel</code>)</li>
<li>add the virtual environment as kernel to jupyter config:<br>
<code>python -m ipykernel install --user --name myenv --display-name &quot;my Python (myenv)&quot;</code></li>
<li>The previous step will write some config files to <code>~/.local/share/jupyter/kernels/&lt;myenv&gt;/</code></li>
<li>launch new session from Jupyterlab: new kernel is available as icon &ldquo;<em><strong>my Python (myenv)</strong></em>&rdquo;</li>
</ul>
<p>To remove a kernel, you can delete the directory holding the kernel config files,i.e. <code>~/.local/share/jupyter/kernels/&lt;myenv&gt;/</code></p>
<p>For more details, see the upstream docs: <a href="https://ipython.readthedocs.io/en/latest/install/kernel_install.html#kernels-for-different-environments">https://ipython.readthedocs.io/en/latest/install/kernel_install.html#kernels-for-different-environments</a></p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="i-cannot-access-files-and-notebooks-that-are-on-my-group-share">I cannot access files and notebooks that are on my group share</h3>
<p>The JupyterLab session by default points to the your home directory and there is no easy way to switch to a different location/folder.<br>
In order to access any other folder (i.e. <code>/scratch-cbe</code>, <code>/scratch</code> or <code>/groups</code>) outside of your home directory, log into CBE and create a symlink to that folder in your home directory:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#204a87">cd</span> ~
ln -s /groups/&lt;group&gt;
</code></pre></div><p>In the JupyterLab session you an then follow the symlink in your home directory to access the linked folder.</p>
<h3 id="my-jupyterlab-session-does-not-start">My JupyterLab session does not start</h3>
<p>This can be due to multiple reasons.<br>
Make sure to start the new session with the &ldquo;<em><strong>enable logging $HOME/jupyterhub_{jobid}.log</strong></em>&rdquo; option turned on. If the session hangs, check the log file for any errors.<br>
Potentially your user environment is broken and the log files gives you hints how to fix it. If not create a ticket.</p>
<h3 id="i-created-a-new-conda-environment-but-i-cant-create-a-new-notebook-using-that-environment">I created a new conda environment but I can&rsquo;t create a new notebook using that environment</h3>
<p>Make sure to install the <code>ipykernel</code> or <code>irkernel</code> into the new conda environment so that it will appear in the launcher and can be selected as a kernel in the kernel switcher. It might take a while until it shows up.</p>
<h3 id="my-python-notebook-does-not-start-when-i-use-the-cbe-env-module-based-environment">My Python notebook does not start when I use the CBE env module based environment</h3>
<p>Make sure that you didn&rsquo;t accidentally unload the Python 3.6.6 CBE module in the lmod widget. You can also check the log file in your home directory what the error is.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified February 23, 2021: <a  href="https://github.com/clip-hpc/website//commit/084789c94185d9cce0205bac90771240adfd73ec">fix: mem node numbers (084789c)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="E-Mail" aria-label="E-Mail">
    <a class="text-white" target="_blank" href="mailto:contact@clip.science">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 CLIP Team All Rights Reserved</small>
        </br>
        <small class="ml-1"><a href="https://www.imp.ac.at/12/" target="_blank">Imprint and Privacy Policy</a></small>
 	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>







<script src="/js/main.min.0baaeb796c804e6b6cd5513a37bcb65c7c2fc68051093bae203655ea3318731b.js" integrity="sha256-C6rreWyATmts1VE6N7y2XHwvxoBRCTuuIDZV6jMYcxs=" crossorigin="anonymous"></script>



  </body>
</html>